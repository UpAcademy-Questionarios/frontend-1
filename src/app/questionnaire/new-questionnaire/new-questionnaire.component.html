<div class="container-fluid m-auto text-center">

  <h1>Quests Maker</h1>

  <div>
    <button class="btn btn-primary" (click)="addQuestionnaire(b)">
      Submeter Formulário
    </button>
  </div>

  <label for="questdata" style="color: rgb(216, 216, 216);">Dados do Questionário</label>
  <div id="questdata" class="container-fluid bg-light"
    style="border-radius: 15px; color: black; border: 1px solid black; padding: 35px;">
    <div class="row">
      <label class="col-2" for="#questonnaireName">Nome: </label>
      <input class="col-8 mb-3" id="questonnaireName" type="text" placeholder="Nome" [(ngModel)]="b.name">
    </div>

    <div class="form-check-inline mb-3">
      <input class="ml-4" type="checkbox" [(ngModel)]="template">Template
      <input class="ml-4" type="checkbox" [(ngModel)]="quiz">Com resposta certa
      <input class="ml-4" type="checkbox" [(ngModel)]="anonymous">Questionário anônimo:
    </div>
    <div class="row">
      <div class="form-group col-6">
        <label for="editPermissionSelect">Permissão para editar:</label>
        <select multiple class="form-control" id="editPermissionSelect" [(ngModel)]="b.editPrivacy">
          <option value="ADMIN">Admin</option>
          <option value="SUPERUSER">Formador</option>
          <option value="USER">Formando</option>
        </select>
      </div>
      <div class="form-group col-6">
        <label for="viewPermissionSelect">Permissão para visualizar:</label>
        <select multiple class="form-control" id="viewPermissionSelect" [(ngModel)]="b.viewPrivacy">
          <option value="ADMIN">Admin</option>
          <option value="SUPERUSER">Formador</option>
          <option value="USER">Formando</option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="col-2">
        <input type="checkbox" [(ngModel)]="send">Enviar?
      </div>
      <div class="col-2">Academia</div>
      <div class="col-3">
        <ngx-select [disabled]="!send" [items]="academies" [(ngModel)]="academy" name="academy">
        </ngx-select>
      </div>
      <div class="col-2">Para</div>
      <div class="col-3">
        <ngx-select size="large" [disabled]="!traineesId.empty" [multiple]="true" [items]="traineesId"
          [(ngModel)]="trainees">
        </ngx-select>
      </div>
    </div>
  </div>

  <p>----------------Criador de Questões----------------</p>

  <div class="row bg-light" style="border: 1px solid black; border-radius: 15px;">
    <div *ngIf="!quiz" class="row col-3" style="border-radius: 15px;">
      <button [(ngModel)]="multi" (click)="multi=true; single=false; open=false; a.options=[]" class="col-12"
        style="border: unset; border-bottom: 1px solid black; border-radius: 15px 0px 0px 0px; background-color: gray;"
        [ngClass]="{'bg-light':multi }" [ngStyle]="{'border-right': multi ? '0':'1px solid black'}">Resposta <br>
        múltipla</button>

      <button [(ngModel)]="single" (click)="single=true; multi=false; open=false; a.options=[]" class="col-12"
        style="background-color: gray;" [ngClass]="{'bg-light':single}"
        [ngStyle]="{'border-right': single ? '0':'1px solid black'}">
        Resposta <br> única</button>

      <button [(ngModel)]="open" (click)="open=true; multi=false; single=false; a.options=[]" class="col-12"
        style="border: unset; border-right: 1px solid; border-top: 1px solid black; border-radius: 0px 0px 0px 15px; background-color: gray;"
        [ngClass]="{'bg-light':open }" [ngStyle]="{'border-right': open ? '0':'1px solid black'}">Resposta <br>
        aberta</button>
    </div>
    <div class="col-9" style="padding: 15px; background-color: transparent;">
      <div>
        <label>Questao:
          <input [(ngModel)]="a.question" placeholder="Pergunta" />
        </label>
      </div>
      <div>
        <div *ngFor="let option of a.options; index as i">
          <div class="row">
            <div [(ngModel)]="trueOrfalse[i]" class="col-8">{{option}}</div>
            <!-- <input *ngIf="editOp{{i}}=" type="text"> -->
            <fa-icon *ngIf="a.rightAnswer.includes[i]" class="col-1" style="color: green;" [icon]="faCheck"></fa-icon>
            <button class="btn btn-danger col-1" (click)="a.options.splice(i,1)">
              <fa-icon [icon]="faTrash"></fa-icon>
            </button>
            <button class="btn btn-primary col-1" >
              <fa-icon [icon]="faEdit"></fa-icon>
            </button>
            <!-- <input [(ngModel)]="editOp{{i}}=true"type="button" class="btn-primary" *ngIf="editOp{{i}}=true" (click)="editOp{{i}}=false">SAVE -->
          </div>
        </div>
      </div>
      <div *ngIf="multi || single || quiz">
        <label>Resposta:
          <input [(ngModel)]="option" type="text" placeholder="Opção">
          <button (click)="addMoreOptions()">Adicionar</button><span [innerHTML]='customHtml' class="ml-2"
            style="color: red;"></span>
        </label>
      </div>

      <!-- <div class="row">
        <label>Respostas:
          <div *ngFor="let option of a.options">
            <p>{{option}}</p>
          </div>
      </label> -->
      <!-- <input ng-model="myVar" class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked> -->
      <!-- <input [(ngModel)]="option" type="text" placeholder="Opção">
      <button (click)="addMoreOptions(option)">Adicionar</button> -->
      <!-- ao contrario da questao, aqui tive de colocar option e nao a.options porque
                se nao o ngfor a cada letra tentava actualizar 
                No entanto nao dá para limpar da mesma forma-->

      <!-- </div> -->

    </div>
  </div>


  <button class="btn btn-primary" (click)="addQuestion(a)">
    Adicionar Pergunta
  </button>

  <!-- <div> -->
  <!-- <div>
      <label>Questao:
        <input [(ngModel)]="a.question" placeholder="Pergunta" />
      </label>
    </div> -->

  <!-- <div class="row">
      <label>Respostas:</label>
      <div class="form-check">
        <div *ngFor="let option of a.options">
          <p>{{option}}</p>
        </div>
      </div> -->
  <!-- <input ng-model="myVar" class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked> -->
  <!-- <input [(ngModel)]="option" type="text" placeholder="Opção">
      <button (click)="addMoreOptions(option)">Add</button> -->
  <!-- ao contrario da questao, aqui tive de colocar option e nao a.options porque
            se nao o ngfor a cada letra tentava actualizar 
            No entanto nao dá para limpar da mesma forma-->

  <!-- </div> -->
  <!-- <div> 
        <label>Opções: 
            <input [(ngModel)]="a.options"/>
        </label>
    </div> -->

  <!-- <div class="form-check" >
            <input ng-model="myVar" class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
            <input type="text" placeholder="Opção1">
        </div> -->


  <!-- </div> -->

  <p>----------------Display de Questões----------------</p>

  <div *ngFor="let question of b.questionList">
    <p>{{question.question}}</p>
    <div class="row">
      <div *ngFor="let option of question.options">
        <div class="form-check">
          <label class="form-check-label">{{option}}
            <input class="form-check-input" type="radio">
          </label>
        </div>
      </div>
    </div>
    <!-- <p>{{question.options}}</p> -->
  </div>
</div>

<!-- Div para o editar para escolher as opçoes correctas
<div>
  <div *ngFor="let option of a.options; index as i" class="form-check-inline" >
      <input [(ngModel)]="trueOrfalse[i]" *ngIf="option!=''" type="text">{{option}}
      <button *ngIf="option!=''" class="btn btn-danger" (click)="option=''">X</button>
  </div>
</div> -->